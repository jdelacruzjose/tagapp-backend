(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{127:function(e,t,n){},188:function(e,t,n){e.exports=n(438)},193:function(e,t,n){},194:function(e,t,n){},211:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},227:function(e,t,n){},232:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},435:function(e,t,n){},436:function(e,t,n){},438:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(75),o=n.n(r),c=(n(193),n(1)),s=n(2),i=n(4),u=n(3),m=n(5),h=(n(194),n(34)),p=n(22),d=n(6),g=n.n(d),v=function e(){var t=this;Object(c.a)(this,e),this.signup=function(e,n,a,l,r,o,c){return t.service.post("/signup",{username:e,password:n,firstName:a,lastName:l,imageUrl:r}).then((function(e){return e.data}))},this.loggedin=function(){return t.service.get("/loggedin").then((function(e){return e.data}))},this.login=function(e,n){return t.service.post("/login",{username:e,password:n}).then((function(e){return e.data}))},this.logout=function(){return t.service.post("/logout",{}).then((function(e){return e.data}))};var n=g.a.create({baseURL:"https://tagalongapp.herokuapp.com/api/",withCredentials:!0});this.service=n},E=n(8),f=n(18),b=Object(f.a)(),y=g.a.create({baseURL:"https://tagalongapp.herokuapp.com/api/"}),O=function(e){throw e},C={service:y,handleUpload:function(e){return y.post("/upload",e).then((function(e){return e.data})).catch(O)}},j=(n(211),n(21)),N=n.n(j),S=n(76),D=n.n(S),k=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,l=t.value;n.setState(Object(p.a)({},a,l))},n.handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files[0]);var t=new FormData;t.append("imageUrl",e.target.files[0]),C.handleUpload(t).then((function(e){n.setState({imageUrl:e.secure_url})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state.username,a=n.state.password,l=n.state.firstName,r=n.state.lastName,o=n.state.imageUrl;n.service.signup(t,a,l,r,o).then((function(e){n.setState({username:"",password:"",firstName:"",lastName:"",imageUrl:""}),n.props.getUser(e),b.push("/dashboard")})).catch((function(e){return console.log(e)}))},n.handleChange=function(e){var t=e.target,a=t.name,l=t.value;n.setState(Object(p.a)({},a,l))},n.state={username:"",password:"",firstName:"",lastName:"",imageUrl:""},n.service=new v,n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",{className:"theSignUpBox"},l.a.createElement("div",{className:"signupForm"},l.a.createElement(N.a,{className:"signUpBody"}),l.a.createElement(E.b,{to:"/"},l.a.createElement("img",{src:D.a,className:"logo"})),l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("div",{className:"nameLast"},l.a.createElement("input",{type:"text",placeholder:"First Name",name:"firstName",value:this.state.firstName,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null),l.a.createElement("input",{type:"text",placeholder:"Last Name",name:"lastName",value:this.state.lastName,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("br",null),l.a.createElement("input",{type:"text",name:"username",placeholder:"Username",value:this.state.username,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null),l.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null),l.a.createElement("p",null,"Upload Profile Picture:"),l.a.createElement("input",{type:"file",onChange:function(t){return e.handleFileUpload(t)}}),l.a.createElement("br",null),l.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit"},"Submit")))),l.a.createElement("p",null,l.a.createElement("br",null),"Already have account?",l.a.createElement(E.b,{to:"/login"}," Login")))}}]),t}(a.Component),w=(n(217),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state.username,a=n.state.password;n.service.login(t,a).then((function(e){console.log("WE LOGGED IN AND HERES THE USER ",e),n.setState({username:"",password:""}),n.props.getUser(e),b.push("/dashboard")})).catch((function(e){return console.log(e)}))},n.handleChange=function(e){var t=e.target,a=t.name,l=t.value;n.setState(Object(p.a)({},a,l))},n.state={username:"",password:""},n.service=new v,n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(N.a,{className:"inside"}),l.a.createElement("div",{className:"theLoginBox"},l.a.createElement("div",{className:"theLogin"},l.a.createElement(E.b,{to:"/"},l.a.createElement("img",{src:D.a,className:"logo"})),l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("p",null,"Username:"),l.a.createElement("input",{type:"text",placeholder:"Enter Username",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("p",null,"Password:"),l.a.createElement("input",{type:"password",name:"password",placeholder:"Enter Password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null),l.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit"},"Log In")),l.a.createElement("br",null))),l.a.createElement("p",null,l.a.createElement("br",null),"Don't have account?",l.a.createElement(E.b,{to:"/signup"}," Signup!")))}}]),t}(a.Component)),U=(n(218),n(46)),x=n.n(U);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var T=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).logoutUser=function(){n.service.logout().then((function(){n.setState({loggedInUser:null}),n.props.getTheUser(null)}))},n.state={loggedInUser:null},n.service=new v,n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){var e=this;return this.state.loggedInUser?l.a.createElement("nav",{className:"nav-style"},l.a.createElement("img",{src:x.a,className:"logo"}),l.a.createElement("ul",null,l.a.createElement("li",null,"Welcome, ",this.state.loggedInUser.firstName),l.a.createElement("li",null,l.a.createElement(E.b,{to:"/dashboard",style:{textDecoration:"none"}},"Home")),l.a.createElement("li",null,l.a.createElement(E.b,{to:"/events",style:{textDecoration:"none"}},"Events")),l.a.createElement("li",null,l.a.createElement(E.b,{to:"/profile",style:{textDecoration:"none"}},"Vehicle")),l.a.createElement("li",null,l.a.createElement(E.b,{to:"/"},l.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(){return e.logoutUser()}},"Logout"))))):l.a.createElement(l.a.Fragment,null)}}]),t}(a.Component),F=(n(219),function(){return l.a.createElement("div",null,l.a.createElement("nav",{className:"nav-style",id:"theText"},l.a.createElement("div",{className:"userSign"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("img",{src:x.a,className:"logo"})),l.a.createElement("li",null," ",l.a.createElement(E.b,{to:"/login"},"Login")),l.a.createElement("li",null,l.a.createElement(E.b,{to:"/"}),l.a.createElement(E.b,{to:"/signup"},"Signup"))))),l.a.createElement("div",{className:"mainHeader"},l.a.createElement(N.a,{className:"outside"}),l.a.createElement("p",null,"JOIN THE EXPERIENCE!")))}),L=n(113),I=n(78),A=[],M=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).myUserEvents=function(e){if(n.state.userEvents.length){var t=n.state.userEvents;A=t.filter((function(t){return t.author===e}))}return A.map((function(e){return l.a.createElement(L.a.Item,null,l.a.createElement("img",{key:e._id,className:"d-block w-100",src:e.imageUrl,alt:"boohoo",height:"600"}),l.a.createElement(I.a,null,l.a.createElement("h3",null,e.eventName)))}))},n.state={userEvents:[],myId:""},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({myId:this.props.myUser._id},(function(){g.a.get("https://tagalongapp.herokuapp.com/api/events").then((function(t){e.setState({userEvents:t.data})})).catch((function(e){return console.log(e)}))}))}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"My Events:"),l.a.createElement(L.a,null,this.myUserEvents(this.state.myId)))}}]),t}(a.Component),P=(n(227),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).findMetroId=function(){var e=n.props.getUserCoords.userLat,t=n.props.getUserCoords.userLng;g.a.get("https://api.songkick.com/api/3.0/search/locations.json?location=geo:".concat(e,",").concat(t,"&apikey=wXhfjuiigBr1Hnnx")).then((function(e){var t=e.data.resultsPage.results.location[0].metroArea.id;return n.findConcertsNearby(t)}))},n.findConcertsNearby=function(e){var t=e;g.a.get("https://api.songkick.com/api/3.0/metro_areas/".concat(t,"/calendar.json?apikey=wXhfjuiigBr1Hnnx")).then((function(e){var t=e.data.resultsPage.results.event;n.setState({listofConcerts:t})}))},n.showConcerts=function(){return n.state.listofConcerts.slice(0,16).map((function(e){return l.a.createElement("div",{className:"fullContain"},l.a.createElement("div",{className:"eachJumbo",key:e.id},l.a.createElement("div",{className:"jumbo"},l.a.createElement("p",null,e.displayName),l.a.createElement("br",null),l.a.createElement("a",{className:"thusButton",href:e.uri},"Buy Ticket"),l.a.createElement("p",{className:"countdown"}," Start Time: ",e.start.time))))}))},n.state={listofConcerts:[],userLocation:""},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({userLocation:this.props}),this.findMetroId()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",{className:"nearYou"},"Concerts Near You!"),l.a.createElement("div",{className:"fullContain"},this.showConcerts()))}}]),t}(a.Component)),_=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).getAllEvents=function(){g.a.get("https://tagalongapp.herokuapp.com/api/events").then((function(e){n.setState({listOfEvents:e.data})}))},n.getNextEvent=function(){var e=n.state.listOfEvents;console.log("copyOfEvents.length is: ",e.length),console.log("copyOfEvents: ",e),console.log("trying to access date: ",e[0].startDate);var t=(e=e.sort((function(e,t){return parseFloat(e.startDate)>parseFloat(t.startDate)?1:-1})))[0];return console.log("nextEvent is: ",t),t},n.theCountDown=function(){var e=n.getNextEvent();console.log("theCountDown is: ",e),console.log("the countDown date is: ",e.startDate);var t=new Date(e.startDate);console.log("The name of the event is:",e.eventName);e.eventName;console.log("The description of the event is:",e.description);e.description;console.log("the convertDate is: ",t);var a=new Date;console.log("the now is: ",a)},n.state={listOfEvents:[],days:0,hours:0,min:0,sec:0},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getAllEvents()}},{key:"render",value:function(){return console.log("EventCountdown Event List:",this.state.listOfEvents),l.a.createElement("div",null,l.a.createElement("h1",null,"EventCountdown React Component"),l.a.createElement("p",null,"Your Next Event!"),l.a.createElement("p",null,this.state.listOfEvents.length>0&&this.theCountDown()))}}]),t}(a.Component),B=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={days:0,hours:0,min:0,sec:0,nextEventObj:""},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("this.props? :",this.props),console.log("this.props.date? :",this.props.date),this.interval=setInterval((function(){var t=e.calculateCountdown(e.props.date);t?e.setState(t):e.stop()}),1e3)}},{key:"componentWillUnmount",value:function(){this.stop()}},{key:"calculateCountdown",value:function(e){console.log("FROM TEST.JS ===> nextEventObj: ",e);var t=e.startDate;console.log("FROM TEST.JS ===> calculateCountdown(endDate)",t);var n=(Date.parse(new Date(t))-Date.parse(new Date))/1e3;if(console.log("the diff is: ",n),n<=0)return!1;var a={years:0,days:0,hours:0,min:0,sec:0};return n>=31557600&&(a.years=Math.floor(n/31557600),n-=365.25*a.years*86400),n>=86400&&(a.days=Math.floor(n/86400),n-=86400*a.days),n>=3600&&(a.hours=Math.floor(n/3600),n-=3600*a.hours),n>=60&&(a.min=Math.floor(n/60),n-=60*a.min),a.sec=n,a}},{key:"stop",value:function(){clearInterval(this.interval)}},{key:"addLeadingZeros",value:function(e){for(e=String(e);e.length<2;)e="0"+e;return e}},{key:"render",value:function(){var e=this.state;return console.log("COUNTDOWN is: ",e),l.a.createElement("div",{className:"Countdown"},l.a.createElement("h1",null,"YOUR NEXT EVENT: ".concat(this.props.date.eventName)),l.a.createElement("span",{className:"Countdown-col"},l.a.createElement("span",{className:"Countdown-col-element"},l.a.createElement("strong",null,this.addLeadingZeros(e.days)),l.a.createElement("span",null,1===e.days?"Day":"Days"))),l.a.createElement("span",{className:"Countdown-col"},l.a.createElement("span",{className:"Countdown-col-element"},l.a.createElement("strong",null,this.addLeadingZeros(e.hours)),l.a.createElement("span",null,"Hours"))),l.a.createElement("span",{className:"Countdown-col"},l.a.createElement("span",{className:"Countdown-col-element"},l.a.createElement("strong",null,this.addLeadingZeros(e.min)),l.a.createElement("span",null,"Min"))),l.a.createElement("span",{className:"Countdown-col"},l.a.createElement("span",{className:"Countdown-col-element"},l.a.createElement("strong",null,this.addLeadingZeros(e.sec)),l.a.createElement("span",null,"Sec"))))}}]),t}(a.Component);B.defaultProps={date:new Date};var R=B,H=(n(228),n(127),function(){return l.a.createElement("div",{className:"theFooter"},l.a.createElement("img",{src:x.a,className:"logo"}),l.a.createElement("p",null,"\xa9 Tag Along LLC"))}),Y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).getCurrentPosition=function(){navigator.geolocation.getCurrentPosition((function(e){n.setState({userLat:e.coords.latitude,userLng:e.coords.longitude},(function(){}))}),(function(){console.log(new Error("Permission denied"))}))},n.getAllEvents=function(){console.log("getAllEvents() working"),g.a.get("https://tagalongapp.herokuapp.com/api/events").then((function(e){n.setState({listOfEvents:e.data})}))},n.getNextEvent=function(){var e=n.state.listOfEvents;console.log("FROM DASBOARD getNextEvent => copyOfEvents: ",e);var t=(e=e.sort((function(e,t){return parseFloat(e.startDate)>parseFloat(t.startDate)?1:-1})))[0];return console.log("FROM DASHBOARD getNextEvent => nextEvent is: ",t),console.log("FROM DASHBOARD getNextEvent => the getNext event date is: ",t.startDate),t},n.state={userLat:"",userLng:"",listOfEvents:[],nextEventObj:"",nextEventDate:""},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getAllEvents()}},{key:"render",value:function(){return this.getCurrentPosition(),this.props.currentUser?l.a.createElement("div",{id:"myNextBackground"},l.a.createElement("div",{className:"myEvents"},l.a.createElement("div",{className:"myTest"},l.a.createElement(N.a,{className:"theedashboard"}),l.a.createElement(M,{myUser:this.props.currentUser})),l.a.createElement("div",null,l.a.createElement("div",{id:"carContainer"},this.state.listOfEvents>0&&this.displayEventInfo()),this.state.listOfEvents.length>0?l.a.createElement(R,{date:this.getNextEvent()}):l.a.createElement("div",null,"Not Working")),""!==this.state.userLat?l.a.createElement(P,{getUserCoords:this.state}):l.a.createElement("div",{class:"loader"},"Loading..."),l.a.createElement("div",null,l.a.createElement(H,null)))):l.a.createElement("div",{id:"myNextBackground"},l.a.createElement("div",{className:"myNextEvent"},l.a.createElement("div",null,l.a.createElement(M,null)),l.a.createElement("div",null,l.a.createElement(_,null)),l.a.createElement("div",null,l.a.createElement(H,null))))}}]),t}(a.Component),J=(n(232),n(47)),W=n.n(J),G=n(80),Z=n(114),X=n(81),z=n.n(X);function K(e){var t=e.getCoord,n=l.a.useState(""),a=Object(Z.a)(n,2),r=a[0],o=a[1],c=l.a.useState({lat:null,lng:null}),s=Object(Z.a)(c,2),i=s[0],u=s[1],m=function(){var e=Object(G.a)(W.a.mark((function e(n){var a,l;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("value is ".concat(n)),e.next=3,Object(X.geocodeByAddress)(n);case 3:return a=e.sent,e.next=6,Object(X.getLatLng)(a[0]);case 6:l=e.sent,o(n),u(l),console.log("coordinates is ".concat(i.lat)),t(l);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement(z.a,{value:r,onChange:o,onSelect:m},(function(e){var t=e.getInputProps,n=e.suggestions,a=e.getSuggestionItemProps,r=e.loading;return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("p",null,"Latitude: ",i.lat),l.a.createElement("p",null,"Longitude: ",i.lng)),l.a.createElement("input",t({placeholder:"Type address"})),l.a.createElement("div",null,r?l.a.createElement("div",null,"...loading"):null,n.map((function(e){var t={backgroundColor:e.active?"#41b6e6":"#fff"};return l.a.createElement("div",a(e,{style:t}),e.description)}))))})))}var q=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,l=t.value;n.setState(Object(p.a)({},a,l))},n.handleSelect=function(e){n.setState({transportation:e.target.value})},n.handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files[0]);var t=new FormData;t.append("imageUrl",e.target.files[0]),C.handleUpload(t).then((function(e){n.setState({imageUrl:e.secure_url})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},n.handleFormSubmit=function(e){console.log("handleFormSubmit Working"),console.log("handleFOrmSubmit this.state:",n.state),e.preventDefault(),g.a.post("https://tagalongapp.herokuapp.com/api/events",n.state,{withCredentials:!0}).then((function(){n.props.getEvent(),n.setState({eventName:"",description:"",category:"",location:"",lng:"",lat:"",startDate:"",endDate:"",imageUrl:"",transportation:""})})).catch((function(e){return console.log(e)}))},n.setCoord=function(e){console.log("coord in parent: ",e),n.setState({lng:e.lng,lat:e.lat},(function(){return console.log("state in add event",n.state)}))},n.showAddVehicleFuntion=function(){console.log("button clicked"),n.setState({showingVehicleList:!0})},n.state={eventName:"",description:"",category:"",lng:"",lat:"",startDate:"",endDate:"",imageUrl:"",showingVehicleList:!1,listOfVehicles:[],transportation:""},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:5000/api/vehicles/").then((function(e){return e.json()})).then((function(t){e.setState({listOfVehicles:t}),console.log(e.state.listOfVehicles)}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(t){return e.handleFormSubmit(t)}},l.a.createElement("label",null,"Event"),l.a.createElement("input",{type:"text",name:"eventName",placeholder:"Your Event's Name",value:this.state.eventName,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null),l.a.createElement("label",null,"Description:"),l.a.createElement("textarea",{name:"description",value:this.state.description,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null),l.a.createElement("label",null,"Category"),l.a.createElement("input",{type:"text",name:"category",value:this.state.category,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null),l.a.createElement(K,{getCoord:function(t){return e.setCoord(t)}}),l.a.createElement("br",null),l.a.createElement("label",null,"Start Date"),l.a.createElement("input",{type:"date",name:"startDate",value:this.state.startDate,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("label",null,"End Date"),l.a.createElement("input",{type:"date",name:"endDate",value:this.state.endDate,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null),l.a.createElement("input",{type:"file",onChange:function(t){return e.handleFileUpload(t)}}),l.a.createElement("br",null),l.a.createElement("select",{value:this.state.transportation,onChange:function(t){return e.handleSelect(t)}},this.state.listOfVehicles.map((function(e){return l.a.createElement("option",{value:e._id,key:e._id},e.model)}))),l.a.createElement("button",{type:"submit",onChange:function(t){return e.handleChange(t)}},"Submit"),l.a.createElement("br",null)))}}]),t}(a.Component),Q=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).getAllEvents=function(){g.a.get("https://tagalongapp.herokuapp.com/api/events").then((function(t){e.setState({listOfEvents:t.data})}))},e.state={listOfEvents:[]},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getAllEvents()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(N.a,{className:"theeEvent"}),l.a.createElement("div",{className:"eventContain"},l.a.createElement("div",{className:"theForm"},l.a.createElement(q,{getEvent:this.getAllEvents})),l.a.createElement("div",{className:"eventNames"},this.state.listOfEvents.map((function(e){return l.a.createElement("div",{key:e._id},l.a.createElement(E.b,{to:"/events/".concat(e._id)},l.a.createElement("h3",null,e.eventName)))})))))}}]),t}(a.Component),$=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state.eventName,a=n.state.description,l=n.state.category,r=n.state.startDate,o=n.state.endDate,c=n.state.lng,s=n.state.lat;g.a.put("https://tagalongapp.herokuapp.com/"+"api/events/".concat(n.props.theEvent._id),{eventName:t,description:a,category:l,startDate:r,endDate:o,lng:c,lat:s}).then((function(){n.props.getTheEvent(),n.props.history.push("/events")})).catch((function(e){return console.log(e)}))},n.handleChange=function(e){var t=e.target,a=t.name,l=t.value;n.setState(Object(p.a)({},a,l))},n.setCoord=function(e){console.log("coord in parent: ",e),n.setState({lng:e.lng,lat:e.lat},(function(){return console.log("state in add event",n.state)}))},n.state={eventName:n.props.theEvent.eventName,description:n.props.theEvent.description,category:n.props.theEvent.category,startDate:n.props.theEvent.startDate,endDate:n.props.theEvent.endDate,lng:n.props.theEvent.lng,lat:n.props.theEvent.lat},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("hr",null),l.a.createElement("h3",null,"Edit form"),l.a.createElement("form",{onSubmit:function(t){return e.handleFormSubmit(t)}},l.a.createElement("label",null,"Event Name:"),l.a.createElement("input",{type:"text",name:"eventName",value:this.state.eventName,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("label",null,"Description:"),l.a.createElement("textarea",{name:"description",value:this.state.description,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("label",null,"Category:"),l.a.createElement("textarea",{name:"category",value:this.state.category,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("label",null,"Start Date"),l.a.createElement("input",{name:"startDate",type:"date",value:this.state.startDate,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("label",null,"End Date"),l.a.createElement("input",{name:"endDate",type:"date",value:this.state.endDate,onChange:function(t){return e.handleChange(t)}}),l.a.createElement(K,{getCoord:function(t){return e.setCoord(t)}}),l.a.createElement("input",{type:"submit",value:"Submit"})))}}]),t}(a.Component),ee=(n(238),n(239),n(55));function te(e){var t=e.theEvent.lat,n=e.theEvent.lng;console.log("The lat: ".concat(t," and the lng: ").concat(n));var a=Object(ee.withScriptjs)(Object(ee.withGoogleMap)((function(){return l.a.createElement(ee.GoogleMap,{defaultZoom:10,defaultCenter:{lat:t,lng:n}},l.a.createElement(ee.Marker,{position:{lat:t,lng:n}}))})));return l.a.createElement("div",{style:{width:"100vw",height:"100vh"}},l.a.createElement(a,{googleMapURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_URL:"https://tagalongapp.herokuapp.com/"}).REACT_APP_GOOGLE_KEY),loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:"100%"}}),mapElement:l.a.createElement("div",{style:{height:"100%"}})}))}var ne=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).getVehicle=function(e){console.log(e);var t="";e&&(t=e.transportation[0]),g.a.get("https://tagalongapp.herokuapp.com/"+"api/vehicles/".concat(t)).then((function(e){console.log("responseFromApi: ",e);e.data;var t=e.seats;console.log("The num of seats is ".concat(t)),n.setState({numberSeats:t})}))},n.getSingleEvent=Object(G.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,e.next=3,g.a.get("https://tagalongapp.herokuapp.com/"+"api/events/".concat(t.id)).then((function(e){var t=e.data;console.log("the event from EVentDetails.js: ",t),n.setState(t,(function(){n.getVehicle(n.state)}))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)}))),n.displaySeats=function(){var e=document.getElementById("carContainer");if(document.createElement("div").textContent="Hello",console.log(e),!(n.state.numberSeats>0))return l.a.createElement("div",null,"NO SEATS AVAILABLE");for(var t=0;t<n.state.numberSeats;t++)e.innerHTML+='<div id="carSeat"><p>Seat # '.concat(t,"</p></div>")},n.deleteEvent=function(){var e=n.props.match.params;g.a.delete("https://tagalongapp.herokuapp.com/"+"api/events/".concat(e.id)).then((function(){n.props.history.push("/events")})).catch((function(e){console.log(e)}))},n.ownershipCheck=function(e){if(n.props.loggedInUser&&e.owner===n.props.loggedInUser._id)return l.a.createElement("div",null,l.a.createElement("div",null,n.renderEditForm()," "),l.a.createElement("button",{onClick:function(){return n.deleteEvent(n.state._id)}},"Delete Event"))},n.renderEditForm=function(){if(n.state.eventName)return l.a.createElement($,Object.assign({theEvent:n.state,getTheEvent:n.getSingleEvent},n.props))},n.state={theEvent:null},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getSingleEvent()}},{key:"render",value:function(){var e=this;return null!==this.state?l.a.createElement("div",{className:"mainEventDetails"},l.a.createElement("div",{className:"info"},l.a.createElement("h1",null,this.state.eventName),l.a.createElement("p",null,this.state.description),l.a.createElement("p",null,this.state.category),this.state.author&&l.a.createElement("p",null,this.state.author.firstName," ",this.state.author.lastName),l.a.createElement("p",null,"Start Date: ",this.state.startDate),l.a.createElement("p",null,"End Date: ",this.state.endDate),l.a.createElement("img",{src:this.state.imageUrl,alt:"boohoo",height:"300"})),l.a.createElement(te,{className:"theBigMap",theEvent:this.state}),l.a.createElement("div",null,l.a.createElement("h1",null,"Your Vehicle"),l.a.createElement("div",{id:"carContainer"},this.state.numberSeats>0&&this.displaySeats())),l.a.createElement("div",null,this.renderEditForm()," "),l.a.createElement("button",{onClick:function(){return e.deleteEvent()}},"Delete Event"),l.a.createElement("br",null),l.a.createElement("div",null,this.ownershipCheck(this.state)),l.a.createElement(E.b,{to:"/events"},"Back to Events")):l.a.createElement("div",null,"Loading")}}]),t}(a.Component),ae=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,l=t.value;n.setState(Object(p.a)({},a,l))},n.handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files[0]);var t=new FormData;t.append("imageUrl",e.target.files[0]),C.handleUpload(t).then((function(e){n.setState({imageUrl:e.secure_url})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},n.handleFormSubmit=function(e){e.preventDefault(),g.a.post("https://tagalongapp.herokuapp.com/api/vehicles",n.state,{withCredentials:!0}).then((function(){n.props.getVehicle(),n.setState({vehicleType:"",model:"",year:"",seats:0,imageUrl:""})})).catch((function(e){return console.log(e)}))},n.state={vehicleType:"",model:"",year:"",seats:0,imageUrl:""},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("label",null,"Vehicle"),l.a.createElement("input",{type:"text",name:"vehicleType",value:this.state.vehicleType,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("label",null,"Model"),l.a.createElement("input",{type:"text",name:"model",value:this.state.model,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("label",null,"Year"),l.a.createElement("input",{type:"text",name:"year",value:this.state.year,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("label",null,"Seats"),l.a.createElement("input",{type:"number",name:"seats",value:this.state.seats,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null),l.a.createElement("input",{type:"file",onChange:function(t){return e.handleFileUpload(t)}}),l.a.createElement("br",null),l.a.createElement("button",{type:"submit"},"Submit")))}}]),t}(a.Component),le=(n(435),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).getAllVehicles=function(){g.a.get("https://tagalongapp.herokuapp.com/api/vehicles").then((function(t){e.setState({listOfVehicles:t.data})}))},e.state={listOfVehicles:[],listOfVehiclesUserVehicles:[]},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getAllVehicles()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(N.a,{className:"theeVehicle"}),l.a.createElement("div",{className:"vehicleContain"},l.a.createElement("div",{className:"vehicleForm"},l.a.createElement(ae,{getVehicle:this.getAllVehicles})),l.a.createElement("div",{className:"eventNames"},this.state.listOfVehicles.map((function(e){return l.a.createElement("div",{key:e._id},l.a.createElement(E.b,{to:"/vehicles/".concat(e._id)},l.a.createElement("h3",null,e.model)))})))))}}]),t}(a.Component)),re=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state.vehicleType,a=n.state.model,l=n.state.year,r=n.state.seats;g.a.put("https://tagalongapp.herokuapp.com/"+"api/events/".concat(n.props.theVehicle._id),{vehicleType:t,model:a,year:l,seats:r}).then((function(){n.props.getTheVehicle(),n.props.history.push("/vehicles")})).catch((function(e){return console.log(e)}))},n.handleChangeVehicleType=function(e){n.setState({vehicleType:e.target.value})},n.handleChangeModel=function(e){n.setState({model:e.target.value})},n.handleChangeYear=function(e){n.setState({year:e.target.value})},n.handleChangeSeats=function(e){n.setState({seats:e.target.value})},n.state={vehicleType:n.props.theVehicle.vehicleType,model:n.props.theVehicle.model,year:n.props.theVehicle.year,seats:n.props.theVehicle.seats},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("hr",null),l.a.createElement("h3",null,"Edit form"),l.a.createElement("form",{onSubmit:function(t){return e.handleFormSubmit(t)}},l.a.createElement("label",null,"Vehicle Type:"),l.a.createElement("input",{type:"text",name:"vehicleType",value:this.state.vehicleType,onChange:function(t){return e.handleChangeVehicleType(t)}}),l.a.createElement("label",null,"Model:"),l.a.createElement("input",{type:"text",name:"model",value:this.state.model,onChange:function(t){return e.handleChangeModel(t)}}),l.a.createElement("label",null,"Year:"),l.a.createElement("input",{type:"text",name:"year",value:this.state.year,onChange:function(t){return e.handleChangeYear(t)}}),l.a.createElement("label",null,"Seats:"),l.a.createElement("input",{type:"text",name:"seats",value:this.state.seats,onChange:function(t){return e.handleChangeSeats(t)}}),l.a.createElement("input",{type:"submit",value:"Submit"})))}}]),t}(a.Component),oe=(n(436),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).getSingleVehicle=function(){var e=n.props.match.params;g.a.get("https://tagalongapp.herokuapp.com/"+"api/vehicles/".concat(e.id)).then((function(e){var t=e.data;n.setState(t)})).catch((function(e){console.log(e)}))},n.renderEditForm=function(){if(n.state.model)return l.a.createElement(re,Object.assign({theVehicle:n.state,getSingleVehicle:n.getSingleVehicle},n.props));n.getSingleVehicle()},n.deleteVehicle=function(){var e=n.props.match.params;g.a.delete("https://tagalongapp.herokuapp.com/"+"api/vehicles/".concat(e.id)).then((function(){n.props.history.push("/vehicles")})).catch((function(e){console.log(e)}))},n.ownershipCheck=function(e){if(n.props.loggedInUser&&e.owner===n.props.loggedInUser._id)return l.a.createElement("div",null,l.a.createElement("div",null,n.renderEditForm()," "),l.a.createElement("button",{onClick:function(){return n.deleteVehicle(n.state._id)}},"Delete Vehicle"))},n.renderEditForm=function(){if(n.state.model)return l.a.createElement(re,Object.assign({theVehicle:n.state,getTheVehicle:n.getSingleVehicle},n.props));n.getSingleVehicle()},n.state={theVehicle:{}},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getSingleVehicle()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"theViews"},l.a.createElement("h1",null,this.state.model),l.a.createElement("p",null,"Seats Available: ",this.state.seats),l.a.createElement("img",{src:this.state.imageUrl,alt:"boohoo",height:"300"}),l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){return e.deleteVehicle()}},"Delete Vehicle")),l.a.createElement("div",null,l.a.createElement(E.b,{to:"/vehicles"},"Back to Vehicle")))}}]),t}(a.Component)),ce=function(){return l.a.createElement("div",null,l.a.createElement(le,null))},se=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).getTheUser=function(e){n.setState({loggedInUser:e})},n.state={loggedInUser:null},n.service=new v,n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&this.service.loggedin().then((function(t){e.setState({loggedInUser:t})})).catch((function(t){e.setState({loggedInUser:!1})}))}},{key:"render",value:function(){var e=this;return this.fetchUser(),this.state.loggedInUser?l.a.createElement("div",{className:"App"},l.a.createElement(T,{userInSession:this.state.loggedInUser,getTheUser:this.getTheUser}),l.a.createElement(h.c,null,l.a.createElement(h.a,{exact:!0,path:"/landing",component:F}),l.a.createElement(h.a,{exact:!0,path:"/dashboard",render:function(t){return l.a.createElement(Y,Object.assign({},t,{currentUser:e.state.loggedInUser}))}}),l.a.createElement(h.a,{exact:!0,path:"/events",component:Q}),l.a.createElement(h.a,{exact:!0,path:"/events/:id",component:ne}),l.a.createElement(h.a,{exact:!0,path:"/vehicles",component:le}),l.a.createElement(h.a,{exact:!0,path:"/vehicles/:id",component:oe}),l.a.createElement(h.a,{exact:!0,path:"/profile",component:ce}),l.a.createElement(h.a,{exact:!0,path:"/concerts",component:P}))):l.a.createElement("div",{className:"App"},l.a.createElement(T,{userInSession:this.state.loggedInUser}),l.a.createElement(h.c,null,l.a.createElement(h.a,{exact:!0,path:"/",component:F}),"} />",l.a.createElement(h.a,{exact:!0,path:"/signup",render:function(){return l.a.createElement(k,{getUser:e.getTheUser})}}),l.a.createElement(h.a,{exact:!0,path:"/login",render:function(){return l.a.createElement(w,{getUser:e.getTheUser})}}),l.a.createElement(h.a,{exact:!0,path:"/events",component:Q}),l.a.createElement(h.a,{exact:!0,path:"/events/:id",component:ne})))}}]),t}(a.Component);n(437);o.a.render(l.a.createElement(E.a,null,l.a.createElement(se,null)),document.getElementById("root"))},46:function(e,t,n){e.exports=n.p+"static/media/LogoMakr_1z6JBI.d3a5c16f.png"},76:function(e,t,n){e.exports=n.p+"static/media/LogoMakr_4NKy7z.f5b9bed8.png"}},[[188,1,2]]]);
//# sourceMappingURL=main.fb0e8156.chunk.js.map